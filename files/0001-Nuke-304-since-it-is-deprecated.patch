From 8b3ca716fdf048cdb2a98a426939f3ddd5fa4cd2 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@stroblindustries.com>
Date: Sat, 20 Oct 2018 13:31:16 +0300
Subject: [PATCH 1/1] Nuke 304 since it is deprecated.

---
 crapshoot                 |  2 --
 doflicky/bundleset.py     |  2 --
 doflicky/detection.py     |  3 +--
 doflicky/driver/nvidia.py | 24 ------------------------
 4 files changed, 1 insertion(+), 30 deletions(-)

diff --git a/crapshoot b/crapshoot
index ad37c84..e8d7f10 100755
--- a/crapshoot
+++ b/crapshoot
@@ -12,7 +12,6 @@
 
 from doflicky import OSContext
 from doflicky.driver.nvidia import DriverBundleNvidia
-from doflicky.driver.nvidia import DriverBundleNvidia304
 from doflicky.driver.nvidia import DriverBundleNvidia340
 from doflicky.driver.broadcom import DriverBundleBroadcom
 import pisi
@@ -32,7 +31,6 @@ class BundleSet:
         self.drivers = [
             DriverBundleNvidia340(),
             DriverBundleNvidia(),
-            DriverBundleNvidia304(),
             DriverBundleBroadcom(),
         ]
         self.allDrivers = list()
diff --git a/doflicky/bundleset.py b/doflicky/bundleset.py
index e501435..e97c6d8 100644
--- a/doflicky/bundleset.py
+++ b/doflicky/bundleset.py
@@ -12,7 +12,6 @@
 
 from doflicky import OSContext
 from doflicky.driver.nvidia import DriverBundleNvidia
-from doflicky.driver.nvidia import DriverBundleNvidia304
 from doflicky.driver.nvidia import DriverBundleNvidia340
 from doflicky.driver.broadcom import DriverBundleBroadcom
 from pisi.db.installdb import InstallDB
@@ -32,7 +31,6 @@ class BundleSet:
         self.drivers = [
             DriverBundleNvidia340(),
             DriverBundleNvidia(),
-            DriverBundleNvidia304(),
             DriverBundleBroadcom(),
         ]
         self.allDrivers = list()
diff --git a/doflicky/detection.py b/doflicky/detection.py
index c88b601..9eeecbc 100644
--- a/doflicky/detection.py
+++ b/doflicky/detection.py
@@ -67,8 +67,7 @@ class DriverBundlePCI(DriverBundle):
 
 
 nvidia_driver_priority = ['nvidia-glx-driver',
-                          'nvidia-340-glx-driver',
-                          'nvidia-304-glx-driver']
+                          'nvidia-340-glx-driver']
 
 
 def detect_hardware_packages():
diff --git a/doflicky/driver/nvidia.py b/doflicky/driver/nvidia.py
index d2b34cc..11e9503 100644
--- a/doflicky/driver/nvidia.py
+++ b/doflicky/driver/nvidia.py
@@ -79,27 +79,3 @@ class DriverBundleNvidia340(DriverBundleNvidiaBase):
         else:
             basePackages.append("nvidia-340-glx-driver")
         return basePackages
-
-
-class DriverBundleNvidia304(DriverBundleNvidiaBase):
-    """ NVIDIA driver 304 (nvidia-304-glx-driver) """
-
-    def __init__(self):
-        DriverBundleNvidiaBase.__init__(self,
-                                        "nvidia-304-glx-driver.modaliases")
-
-    def get_name(self):
-        return "NVIDIA Graphics Driver (304.xx series)"
-
-    def get_priority(self):
-        return 1
-
-    def get_packages(self, context, emul32=False):
-        basePackages = ["nvidia-304-glx-driver-common"]
-        if emul32:
-            basePackages.append("nvidia-304-glx-driver-32bit")
-        if context.get_active_kernel_series() == "current":
-            basePackages.append("nvidia-304-glx-driver-current")
-        else:
-            basePackages.append("nvidia-304-glx-driver")
-        return basePackages
-- 
2.19.1

